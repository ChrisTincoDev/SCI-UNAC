---
const currentPath = Astro.url.pathname;

const menuItems = [
  { name: "Inicio", href: "/home", icon: `<path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/>` },
  { name: "Inventario", href: "/inventory", icon: `<path d="M200-80q-33 0-56.5-23.5T120-160v-451q-18-11-29-28.5T80-680v-120q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v120q0 23-11 40.5T840-611v451q0 33-23.5 56.5T760-80H200Zm0-520v440h560v-440H200Zm-40-80h640v-120H160v120Zm200 280h240v-80H360v80Zm120 20Z"/>` },
  { name: "Ventas", href: "/sales", icon: `<path d="M280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM246-720l96 200h280l110-200H246Zm-38-80h590q23 0 35 20.5t1 41.5L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68-39.5t-2-78.5l54-98-144-304H40v-80h130l38 80Zm134 280h280-280Z"/>` },
  { name: "Compras", href: "/purchases", icon: `<path d="M440-240h80v-40h40q17 0 28.5-11.5T600-320v-120q0-17-11.5-28.5T560-480H440v-40h160v-80h-80v-40h-80v40h-40q-17 0-28.5 11.5T360-560v120q0 17 11.5 28.5T400-400h120v40H360v80h80v40ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm0-80h480v-446L526-800H240v640Zm0 0v-640 640Z"/>` },
  { name: "Reportes", href: "/reports", icon: `<path d="M120-120v-80l80-80v160h-80Zm160 0v-240l80-80v320h-80Zm160 0v-320l80 81v239h-80Zm160 0v-239l80-80v319h-80Zm160 0v-400l80-80v480h-80ZM120-327v-113l280-280 160 160 280-280v113L560-447 400-607 120-327Z"/>` }
];
---

<section class="h-full w-1/6 rounded-2xl shadow-md bg-white flex flex-col p-4">
  <!-- Logo -->
  <div class="relative w-full flex items-center justify-center overflow-hidden rounded-lg my-6 group" transition:persist 
  transition:name="sidebar-logo"
  transition:animate="none">
    <h1 class="2xl:text-xl text-base font-bold text-center my-6 relative z-10 text-white group-hover:scale-105 duration-300">
      TP FORTALEZA
      <span class="block absolute left-1/2 -translate-x-1/2 bottom-0 h-[3px] w-0 bg-white transition-all duration-300 group-hover:w-[100%]"></span>
    </h1>
    <video src="/fondodashboard.webm" autoplay loop muted class="absolute w-full"></video>
  </div>

  <!-- Menú dinámico -->
  <ul class="flex flex-col gap-4 mt-4">
    {menuItems.map(item => (
      <li>
        <a transition:animate="fade"
          href={item.href} 
          class={`gap-2 p-3 flex items-center rounded-lg cursor-pointer 
            ${currentPath === item.href 
              ? "bg-[#3c63ff] text-white shadow-md" 
              : "hover:bg-[#3c63ff] hover:text-white hover:shadow-md"}`}>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor" set:html={item.icon}></svg>
          {item.name}
        </a>
      </li>
    ))}
  </ul>

  <!-- Logout -->
  <div class="flex items-end w-full mt-auto">
    <a href="/logout" class="bg-[#3c63ff] hover:text-white gap-2 p-3 flex items-center rounded-lg hover:shadow-md cursor-pointer text-white w-full">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
        <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"/>
      </svg>
      Cerrar sesión
    </a>
  </div>
</section>