---
const { error } = Astro.props;
---

<section class="h-screen w-screen overflow-hidden relative bg-[#ecedf8]">
    <video class="absolute top-0 left-0 w-full h-full object-cover opacity-40 contrast-200" src="/fondo_login.webm" autoplay muted loop ></video>
    <div class="relative z-10 flex w-full h-full p-24 justify-around items-center gap-2">
        <div class="bg-white/95 w-2/3 h-full rounded-2xl p-16 gap-4 flex flex-col justify-center items-start drop-shadow-md">
            <h4 class="absolute top-16 left-16 font-bold text-black text-2xl">TP FORTALEZA</h4>
            <h1 class="font-extrabold text-7xl flex flex-col my-16">Sistema de <span class="font-black text-[#3c63ff]">Control de Inventarios</span> </h1>
        </div>
        <div class="flex justify-center items-center w-1/3 h-full bg-white/20 rounded-2xl border-t-1 border-b-1 border-white backdrop-blur-lg drop-shadow-md">
            <form action="/login" method="POST" class=" p-8 rounded-lg w-full h-full flex flex-col justify-center">
                <h2 class="text-2xl text-black font-bold mb-6 text-center">Inicia Sesión</h2>

                        {error && (
          <p class="text-red-500 font-semibold mb-4 text-center">
            Usuario o contraseña incorrectos
          </p>
        )}

                <div class="mb-4">
                    <label for="username" class="block text-gray-700 font-semibold mb-2">Usuario</label>
                    <input type="text" id="username" name="username" required class="w-full px-3 py-2 border border-[#3c63ff] rounded-md focus:outline-none focus:ring-2 focus:ring-[#3c63ff]">
                </div>
                <div class="mb-6">
                    <label for="password" class="block text-gray-700 font-semibold mb-2">Contraseña</label>
                    <div class="relative">
                        <input type="password" id="password" name="password" required class="w-full px-3 py-2 border border-[#3c63ff] rounded-md focus:outline-none focus:ring-2 focus:ring-[#3c63ff] pr-10" />
                        <button type="button" class="absolute right-2 top-2 cursor-pointer focus:outline-none" id="togglePasswordBtn" tabindex="-1">
                            <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="#3c63ff">
                                <path id="eyeOpen" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path id="eyeOpen2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                        </button>
                    </div>
                </div>
                <button type="submit" class="w-full bg-[#3c63ff] text-white font-semibold py-2 px-4 rounded-md hover:bg-[#2f4edb] transition duration-300 cursor-pointer">Ingresar</button>
            </form>
        </div>
    </div>

    <script>
        const passwordInput = document.getElementById("password") as HTMLInputElement;
        const togglePasswordBtn = document.getElementById("togglePasswordBtn") as HTMLButtonElement;
        const eyeIcon = document.querySelector<SVGSVGElement>('#eyeIcon');

        if (passwordInput && togglePasswordBtn && eyeIcon) {
        togglePasswordBtn.addEventListener("click", () => {
            const isPassword = passwordInput.type === "password";
            passwordInput.type = isPassword ? "text" : "password";

            if (isPassword) {
            eyeIcon.innerHTML = `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7 
                0.584-1.862 1.75-3.51 3.289-4.7m3.31-1.713A9.977 9.977 0 0112 5c4.477 0 
                8.268 2.943 9.542 7a9.956 9.956 0 01-4.043 5.02M15 12a3 3 0 11-6 0 
                3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 3l18 18" />`;
            } else {
            eyeIcon.innerHTML = `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 
                9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 
                0-8.268-2.943-9.542-7z" />`;
            }
        });
        }
    </script>
</section>
